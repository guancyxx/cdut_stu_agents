# 题目管理后台访问指南

## 访问地址
http://localhost:8000/admin/problem

## 管理员账号
- 用户名: `root`
- 密码: `rootroot123`

## 快速操作

### 1. 启用题目
1. 登录管理后台
2. 进入题目管理页面
3. 筛选条件:
   - 题目ID前缀: `fps-` (所有FPS导入的题目)
   - 可见性: False (默认不可见)
4. 批量操作:
   - 选中需要启用的题目
   - 点击"批量启用"或修改`visible`字段为`True`

### 2. 调整难度
已导入题目默认难度为"Mid"(中等)，可根据实际情况调整:
- **Low**: 入门题、基础题
- **Mid**: 中等难度
- **High**: 高级题、算法题

建议:
- fps-my-1000-1128 (入门题库): 设为 Low
- fps-bas-3001-3482 (一本通): 根据具体题目设为 Low/Mid/High

### 3. 添加标签
为题目添加分类标签，方便学生筛选:
- 数据类型: 数组、字符串、链表等
- 算法类型: 排序、搜索、动态规划、贪心等
- 知识点: 循环、递归、位运算等
- 难度标签: 入门、进阶、竞赛等

### 4. 设置题目集
可以创建题目集(Contest)组织题目:
- 入门题集 (129题)
- 一本通基础 (480题)
- 专题训练集

## 验证导入结果

### 查看题目统计
```bash
# 总题目数
docker exec cdut-oj-backend python -c "
import sys; sys.path.insert(0, '/app')
import os; os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'oj.settings')
import django; django.setup()
from problem.models import Problem
print(f'总题目数: {Problem.objects.count()}')
print(f'可见题目: {Problem.objects.filter(visible=True).count()}')
print(f'不可见题目: {Problem.objects.filter(visible=False).count()}')
"
```

### 查看题目示例
```bash
# 查看前5题
docker exec cdut-oj-backend python -c "
import sys; sys.path.insert(0, '/app')
import os; os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'oj.settings')
import django; django.setup()
from problem.models import Problem
for p in Problem.objects.all()[:5]:
    print(f'{p._id}: {p.title}')
"
```

## 测试题目

### 推荐先测试的题目
1. **fps-d16b: 送分题-A+B Problem**
   - 最简单的题目
   - 用于验证判题系统是否正常

2. **fps-48c5: C语言-水仙花数**
   - 经典基础题
   - 测试循环和判断

3. **fps-8b02: 鸡兔同笼**
   - 数学题
   - 测试算法逻辑

### 测试步骤
1. 启用上述3题 (设置`visible=True`)
2. 使用学生账号登录前台
3. 提交测试代码
4. 验证判题结果是否正确
5. 检查:
   - 编译是否正常
   - 测试用例是否通过
   - 时间/内存统计是否准确
   - 错误信息是否清晰

## 常见问题

### 题目列表为空
- 原因: 题目默认`visible=False`
- 解决: 在管理后台设置题目为可见

### 判题一直等待
- 检查judge容器状态: `docker ps | grep judge`
- 查看judge日志: `docker logs cdut-oj-judge`
- 重启judge: `docker restart cdut-oj-judge`

### 测试数据找不到
- 检查test_case_id是否正确
- 验证测试数据文件: 
  ```bash
  docker exec cdut-oj-backend ls /app/data/test_case/
  ```

## 批量操作脚本

### 启用所有FPS题目
```python
# 在Django shell中执行
from problem.models import Problem
Problem.objects.filter(_id__startswith='fps-').update(visible=True)
print(f'已启用 {Problem.objects.filter(_id__startswith="fps-", visible=True).count()} 题')
```

### 按来源设置难度
```python
from problem.models import Problem
from utils.constants import Difficulty

# 入门题库设为Low
Problem.objects.filter(_id__startswith='fps-', title__contains='送分题').update(difficulty=Difficulty.LOW)
Problem.objects.filter(_id__startswith='fps-', title__contains='C语言-').update(difficulty=Difficulty.LOW)

# 一本通题库根据章节设置
Problem.objects.filter(title__contains='【例').update(difficulty=Difficulty.MID)
Problem.objects.filter(title__contains='练').update(difficulty=Difficulty.LOW)
```

## 下一步

1. ✅ 题目已成功导入 (609题)
2. ⏳ 登录管理后台审核题目
3. ⏳ 设置题目可见性和难度
4. ⏳ 添加题目标签和分类
5. ⏳ 创建题目集供学生练习
6. ⏳ 测试判题系统

**开始使用**: http://localhost:8000
